<!DOCTYPE html>
<html>
    <head>
        <script src='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js'></script>
        <link href='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css' rel='stylesheet' />
        <title>Hola mundo</title>
        
    </head>
    <body>
        <style>
            .mapboxgl-popup {
            max-width: 400px;
            font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
            }
        </style>
        <div id='map' style='width: 600px; height: 500px;'></div>
        <script>
            mapboxgl.accessToken = 'pk.eyJ1Ijoiam14MyIsImEiOiJja3U4dDg1N2owMDd3MnVyczZ6eGVrejBrIn0.bdRyBhkl-jZwGO5A53t1Rw';
            var map = new mapboxgl.Map({
                container: 'map',
                style: 'mapbox://styles/mapbox/streets-v11',
                center: [-84.4672777, 10.1111384],
                zoom: 15
            });
            map.on('load', () => {
                /*map.loadImage(
                    'https://docs.mapbox.com/mapbox-gl-js/assets/custom_marker.png',
                    (error, image) => {
                    if (error) throw error;
                    map.addImage('custom-marker', image);*/
                map.addSource('casas', {
                type: 'geojson',
                data: 'https://jmx3-pixel.github.io/buildings.geojson'
                });
                map.addLayer({
                    'id': 'casas-layer',
                    'type': 'fill',
                    'source': 'casas',
                    'paint': {
                        'fill-color': 'rgba(200, 100, 240, 0.4)',
                        'fill-outline-color': 'rgba(200, 100, 240, 1)'
                    }
                });
                map.addSource('landcover', {
                type: 'geojson',
                data: 'https://jmx3-pixel.github.io/landcover.geojson'
                });
                map.addLayer({
                    'id': 'landcover-layer',
                    'type': 'fill',
                    'source': 'landcover',
                    'paint': {
                        'fill-color': 'rgba(222, 191, 207, 0.2)',
                        'fill-outline-color': 'rgba(200, 100, 240, 1)'
                    }
                });
                map.addSource('cables', {
                type: 'geojson',
                data: 'https://jmx3-pixel.github.io/power_lines.geojson'
                });
                map.addLayer({
                    'id': 'power_lines-layer',
                    'type': 'line',
                    'source': 'cables',
                    'layout': {
                    'line-join': 'round',
                    'line-cap': 'round'
                    },
                    'paint': {
                    'line-color': '#888',
                    'line-width': 1
                    }
                });
                map.on('click', 'casas-layer', (e) => {
                new mapboxgl.Popup()
.               setLngLat(e.lngLat)
.               setHTML("Casa " + e.features[0].properties.name)
                
.               addTo(map);
                });
                map.addSource('puntos', {
                type: 'geojson',
                data: 'https://jmx3-pixel.github.io/puntos.geojson'
                });
                map.addLayer({
                    'id': 'puntos-layer',
                    'type': 'symbol',
                    'source': 'puntos',
                    'layout': {
                        'icon-image': 'custom-marker',
                        'text-field': ['get', 'title'],
                        'text-font': [
                            'Open Sans Semibold',
                            'Arial Unicode MS Bold'
                        ],
                        'text-offset': [0, 1.25],
                        'text-anchor': 'top'
                    }
                });
                map.on('mouseenter', 'landcover-layer', () => {
                map.getCanvas().style.cursor = 'pointer';
                });
 

                map.on('mouseleave', 'landcover-layer', () => {
                map.getCanvas().style.cursor = '';
                });
                map.on('click', 'landcover-layer', (e) => {
                new mapboxgl.Popup()
.               setLngLat(e.lngLat)
.               setHTML("Lote baldÃ­o " + e.features[0].properties.name)
                
.               addTo(map);
                });
 

                map.on('mouseenter', 'casas-layer', () => {
                map.getCanvas().style.cursor = 'pointer';
                });
 

                map.on('mouseleave', 'casas-layer', () => {
                map.getCanvas().style.cursor = '';
                });
            });
        </script>
        
    </body>
</html>